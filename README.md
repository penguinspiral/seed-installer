# About

This Git repository contains the configuration for bootstrapping a "seed" Debian
installer image ISO for use by a Networks Operation Centre (NOC) host. This "seed"
installer image provides an automated, repeatable, consistent installation candidate
depended upon by the corresponding [Puppet configuration management code](https://github.com/Grindiron/puppet).
The author intends to use this customised Debian installer image for
provisioning a PXE host such that subsequent host deployments can be performed
in an automated, repeatable, and consisten fashion.

Unlike official Debian installer variants (e.g. netinst, CD, DVD) which
_typically_ specify remote APT respositories for package installation & upgrades
the `noc-bootstrap` image contains the _entire_ official Debian `AMD64` architecture
package repository _locally_. To support a wide range of potential "day 1" deployment
configurations all [three](https://www.debian.org/doc/debian-policy/ch-archive.html#archive-areas) archive _areas_ are included: `main`, `contrib`, and `non-free`.


# Rationale

Configuration management tools (e.g. Puppet, Ansible, Chef, etc.) often lag
behind the applications/services/utilities they manage. The application of a
configuration management catalog/playbook/recipe may have worked during the
inception of a host but now no longer "applies" successfully due to upstream
package modifications (e.g. configuration file changes).

The Debian installer image generated by this Github repository attempts to
address this management breaking "drift" by including the _entire_ official
Debian package repository. Having a static repository "snapshot" enables the
coupling of Debian packages to configuration management code _without_ the
concern of breaking changes from upstream sources.

A static, archivable "snapshot" of the official Debian package repository is
intended to serve as an _absolute_ known good state from which a corresponding
Git branch of a configuration management tool deployment binds to.


# Scope

To simplify development only the complete `AMD64` official Debian repository is
mirrored. It is currently not possible to include arbritrary APT based 3rd party
repositories during the customised Debian installer image creation.

It is the author's personal belief that the responsibility of a host's configuration
state should be performed by a fully-fledged configuration management tool. The
Debian Preseed configuration file reflects this sentiment and relies upon a set
of "post steps" for bootstrapping a Puppet environment for _complete_
configuration.


# Drawbacks

A static package repository can quickly become outdated which can introduce security
vulnerabilities in any number of existing packages installed. 


# Prerequisites

## Hardware

## Software

1. Docker

2. Make

3. Internet & Routing

# Deployment

The creation of the "seed" Debian installer image is performed via a Docker
container: `grindiron/noc-bootstrap`. Docker was chosen as the deployment
platform as its image immutability characteristic _ensures_ consistent "seed"
Debian installer image creation. Moreover the embedded Debian package repository
can be updated (externally or by the `grindiron/noc-bootstrap` Docker image) and
an updated "seed" Debian installer image created without having to rebuild the
`grindiron/noc-bootstrap` Docker image.

By default we are mirroring.

## Build an ISO

1. Clone Repo

2. Run: make iso
